<!-- PARAAAAAAA -->
<ng-template #titleTemplate let-navItems2>
  <div *ngFor="let item of navItems; let x = index">
    <ul class="list-group list-group-flush">
      <li *ngIf="item.child && item.child.length > 0" class="list-group-item">
        <details>
          <summary>
            <mat-slide-toggle
              [color]="color"
              [checked]="checked"
              [disabled]="disabled"
              class="font-weight-bold"
              (change)="changeAll(item)"
            >
              {{ item.name }}
            </mat-slide-toggle>
          </summary>
          <ul class="list-group list-group-flush">
            <div [ngClass]="{ row: item.child.length == 0 }">
              <ng-container *ngIf="item.child.length > 0">
                <ng-container *ngFor="let subitem of item.child">
                  <ng-container
                    *ngTemplateOutlet="
                      sectionTemplate;
                      context: { $implicit: subitem }
                    "
                  >
                  </ng-container>
                </ng-container>
              </ng-container>
            </div>
          </ul>
        </details>
      </li>
    </ul>
  </div>
</ng-template>

<ng-template #sectionTemplate let-subitem>
  <ng-container *ngIf="subitem.parent_id && subitem.child.length == 0">
    <div class="col col-md-3 d-flex align-items-stretch">
      <div class="card border border-3 border-light w-100">
        <div class="card-body">
          <div class="card-title">
            <h4 class="card-title">{{ subitem.name }}</h4>
          </div>
          <div class="row">
            <div
              *ngFor="let permit of subitem.permissions; let i = index"
              class="col"
            >
              <mat-slide-toggle
                [color]="color"
                [checked]="permit.Activo == 1"
                [disabled]="disabled"
                (change)="permit.Activo = !permit.Activo"
                id="{{ permit.menu_id + '-' + permit.permission_id }}"
              >
                {{ permit.public_name }}
              </mat-slide-toggle>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container
    *ngIf="subitem.parent_id && subitem.child && subitem.child.length > 0"
  >
    <li class="list-group-item">
      <details>
        <summary>
          <mat-slide-toggle
            [color]="color"
            [checked]="checked"
            [disabled]="disabled"
            (change)="changeAll(subitem)"
          >
            {{ subitem.name }}
          </mat-slide-toggle>
        </summary>
        <ng-container *ngFor="let subitem_ of subitem.child">
          <ul class="list-group list-group-flush">
            <ng-container
              *ngTemplateOutlet="
                sectionTemplate;
                context: { $implicit: subitem_ }
              "
            >
            </ng-container>
          </ul>
        </ng-container>
      </details>
    </li>
  </ng-container>
</ng-template>

<ng-container *ngTemplateOutlet="titleTemplate"> </ng-container>
