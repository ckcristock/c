<!-- <ng-template #sectionTemplate let-Custnode>
  <ul class="sub-ul-li">
    <li>
      <a href="#">
        <span class="left-main-text">{{ Custnode.name }}</span>
        <span class="right-main-text">5</span>
      </a>
    </li>
    <ng-container *ngIf="Custnode.child.length > 0">
      <ng-container *ngFor="let s of Custnode.child">
        <ng-container
          *ngTemplateOutlet="titleTemplate; context: { $implicit: s }"
        >
        </ng-container>
      </ng-container>
    </ng-container>
  </ul>
</ng-template>

<ng-template #titleTemplate let-navItems2>
  <div class="row">
    <ng-container *ngFor="let lession of navItems">
      <div class="col-md-12">
        <div class="row">
          <h5>{{ lession.name }}</h5>
          <div class="ml-2 custom-control custom-switch" dir="ltr">
            <span
              class="d-inline-block"
              tabindex="0"
              data-toggle="tooltip"
              title="{{ lession.name + '-' + lession.id }}"
            >
              <input
                type="checkbox"
                class="custom-control-input"
                (change)="changeAll(lession)"
                id="{{ lession.name + '-' + lession.id }}"
              />
              <label
                class="custom-control-label"
                for="{{ lession.name + '-' + lession.id }}"
              ></label>
            </span>
          </div>
        </div>
      </div>
      <ng-container *ngIf="lession.child.length > 0">
        <ng-container *ngFor="let ss of lession.child">
          <ng-container
            *ngTemplateOutlet="sectionTemplate; context: { $implicit: ss }"
          >
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</ng-template>

<ng-container *ngTemplateOutlet="titleTemplate"> </ng-container> -->

<div class="row">
  <ng-container *ngFor="let item of navItems; let x = index">
    <ng-container *ngIf="!item.link && !navItems[x - 1]?.link">
      <ng-container
        *ngIf="
          item.child &&
          item.child.length > 0 &&
          item.child[0].permissions &&
          !navItems[x - 1]?.link &&
          !item.parent_id
        "
      >
        <div class="col-md-12 ml-3">
          <!-- Nombre principal del menÃº con su checkbox -->
          <div class="row">
            <h5>{{ item.name }}</h5>
            <div class="ml-2 custom-control custom-switch" dir="ltr">
              <span
                class="d-inline-block"
                tabindex="0"
                data-toggle="tooltip"
                title="{{ item.name + '-' + item.id }}"
              >
                <input
                  type="checkbox"
                  class="custom-control-input"
                  (change)="changeAll(item)"
                  id="{{ item.name + '-' + item.id }}"
                />
                <!-- cheked titulo -->
                <label
                  class="custom-control-label"
                  for="{{ item.name + '-' + item.id }}"
                ></label>
              </span>
            </div>
          </div>
        </div>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="item.child.length > 0 && item.parent_id">
      <div class="col-12 mx-3">
        <div class="row">
          <h5>- {{ item.name }}</h5>
          <!-- Subtitulo -->
          <div class="ml-2 text-left custom-control custom-switch" dir="ltr">
            <span
              class="d-inline-block"
              tabindex="0"
              data-toggle="tooltip"
              title="{{ item.name + '-' + item.id }}"
            >
              <input
                type="checkbox"
                class="custom-control-input"
                (change)="changeAllChild(item)"
                id="{{ item.name + '-' + item.id }}"
              /><!-- cheked subtitulo -->
              <label
                class="custom-control-label"
                for="{{ item.name + '-' + item.id }}"
              ></label>
            </span>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="item.link">
      <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-6">
        <div class="card border border-3 border-light">
          <div class="card-body">
            <div class="card-title">
              <h4 class="card-title">{{ item.name }}</h4>
            </div>
            <div
              *ngFor="let permit of item.permissions; let i = index"
              class="col-md-6 custom-control custom-switch mb-2"
              dir="ltr "
            >
              <span
                class="d-inline-block"
                tabindex="0"
                data-toggle="tooltip"
                title="{{ permit.description }}"
              >
                <input
                  type="checkbox"
                  class="custom-control-input"
                  [checked]="permit.Activo"
                  (change)="permit.Activo = !permit.Activo"
                  id="{{ permit.menu_id + '-' + permit.permission_id }}"
                />
                <label
                  class="custom-control-label"
                  for="{{ permit.menu_id + '-' + permit.permission_id }}"
                  >{{ permit.public_name }}</label
                >
              </span>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="item.child.length > 0">
      <div class="col-12">
        <app-menu-child
          [ngClass]="{ 'ml-2 mb-4': item.child[0].permissions }"
          [navItems]="item.child"
        >
        </app-menu-child>
      </div>
    </ng-container>
  </ng-container>
</div>
