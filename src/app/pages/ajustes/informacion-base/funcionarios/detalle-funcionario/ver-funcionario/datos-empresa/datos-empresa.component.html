<div class="card-body">
  <div class="card-title d-flex justify-content-between">
    <h5>Datos de empresa</h5>
    <button
      class="btn btn-link pt-0 edit"
      style="float: right"
      (click)="openConfirm(add)"
    >
      <i class="fas fa-pencil-alt"></i>
    </button>
  </div>
  <div class="row">
    <p class="col-6 font-weight-bold text-mute item-subtitle">Empresa</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.company_name }}
    </p>
    <p class="col-6 font-weight-bold text-mute item-subtitle">Grupo</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.group_name }}
    </p>
    <p class="col-6 font-weight-bold text-mute item-subtitle">Dependencia</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.dependency_name }}
    </p>
    <p class="col-6 font-weight-bold text-mute item-subtitle">Cargo</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.position_name }}
    </p>
    <p class="col-6 font-weight-bold text-mute item-subtitle">Tipo de turno</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.turn_type }}
    </p>
    <p class="col-6 font-weight-bold text-mute item-subtitle">Turno asignado</p>
    <p class="col-6 font-weight-bold">
      {{ empresa.fixed_turn_name }}
    </p>
  </div>
</div>

<ng-template #add let-modal>
  <div class="modal-header">
    <h4 class="text-primary modal-title">Editar empresa del funcionario</h4>
    <button
      type="button"
      class="btn btn-sm btn-flash-border-primary ri-close-fill"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <form [formGroup]="form">
      <mat-form-field class="col-md-6 pl-0" appearance="outline">
        <mat-label>Grupo</mat-label>
        <mat-select
          formControlName="group_id"
          (selectionChange)="getDependencies($event.value)"
        >
          <mat-option *ngFor="let item of groups" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="group_valid"> Campo obligatorio </mat-error>
      </mat-form-field>
      <mat-form-field class="col-md-6 pr-0" appearance="outline">
        <mat-label>Dependencia</mat-label>
        <mat-select
          formControlName="dependency_id"
          (selectionChange)="getPositions($event.value)"
        >
          <mat-option *ngFor="let item of dependencies" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="dependency_valid"> Campo obligatorio </mat-error>
      </mat-form-field>
      <mat-form-field class="col-md-6 pl-0" appearance="outline">
        <mat-label>Cargo</mat-label>
        <mat-select formControlName="position_id">
          <mat-option *ngFor="let item of positions" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="position_valid"> Campo obligatorio </mat-error>
      </mat-form-field>

      <mat-form-field class="col-md-6 pr-0" appearance="outline">
        <mat-label>Turno</mat-label>
        <mat-select formControlName="turn_type">
          <mat-option *ngFor="let item of turnos" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="turn_valid"> Campo obligatorio </mat-error>
      </mat-form-field>
      <mat-form-field
        class="col-md-12 px-0"
        appearance="outline"
        *ngIf="turnSelected == 'Fijo'"
      >
        <mat-label>Turno asignado</mat-label>
        <mat-select formControlName="fixed_turn_id">
          <mat-option *ngFor="let item of fixed_turns" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
        <mat-error *ngIf="fixed_turn_valid"> Campo obligatorio </mat-error>
      </mat-form-field>
    </form>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-default"
      (click)="modal.dismiss('Cross click')"
    >
      Cancelar
    </button>
    <button
      type="button"
      (click)="updateEnterpriseData()"
      class="btn btn-primary"
    >
      Guardar
    </button>
  </div>
</ng-template>
