<ng-container *ngIf="!cargando.valor(); else notProduct">
  <div class="row">
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <div class="row card-title d-flex justify-content-between">
            <div class="col px-0">
              <h4 class="text-primary">Actividad</h4>
            </div>
          </div>
          <hr class="line" />
          <div class="text-center justify-content-center">
            <ng-container *ngIf="Actividades.length > 0; else notActividad">
              <ng-container *ngFor="let item of Actividades">
                <section class="gradient-custom-5">
                  <div class="main-timeline-5">
                    <div class="timeline-5 right-5">
                      <div class="card bg-light">
                        <div class="card-body p-4">
                          <div class="d-flex justify-content-between text-left">
                            <h6>
                              <!-- <i [class]="item.icon"></i> {{ item.title }} <br /> -->
                              <div class="text-muted" style="font-size: x-small">
                                <i class="fas fa-clock me-1"></i>
                                {{ item.Fecha | date : "MMM d, y, h:mm a" }}
                              </div>
                              <div class="text-muted" style="font-size: small">
                                <i class="fas fa-user me-1"></i>
                                {{ item.funcionario.complete_name }}
                              </div>
                            </h6>
                            <img
                              [src]="item.funcionario.image"
                              onerror="this.src='../../../../assets/images/noprofile.png'"
                              class="float-right rounded-circle img-fluid header-profile-user"
                            />
                          </div>
                          <small>
                            {{ item.Detalles }}
                          </small>
                        </div>
                      </div>
                    </div>
                  </div>
                </section>
              </ng-container>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="row">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="text-center align-middle p-0">
                <img
                  onerror="this.src='../../../../assets/images/not-available.png'"
                  [src]="productoPorVer.Foto"
                  class="img-fluid img-product"
                  alt="Vista previa del producto"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <div class="card">
            <div class="card-body">
              <div class="row card-title d-flex justify-content-between">
                <div class="col px-0">
                  <h4 class="text-primary">Información básica</h4>
                </div>
              </div>
              <hr class="line" />
              <div class="rounded-top table-responsive">
                <table class="table table-bordered table-striped table-sm">
                  <thead class="bg-light">
                    <tr class="text-center text-uppercase">
                      <th>Nombre</th>
                      <th>Categoría</th>
                      <th>Subcategoría</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      class="text-center"
                      [ngClass]="{ 'text-danger': productoPorVer.Estado == 'Inactivo' }"
                    >
                      <td class="align-middle">{{ productoPorVer.Nombre_Comercial }}</td>
                      <td class="align-middle">{{ productoPorVer.Categoria }}</td>
                      <td class="align-middle">{{ productoPorVer.Subcategoria }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <div class="row card-title d-flex justify-content-between">
                <div class="col px-0">
                  <h4 class="text-primary">Detalle del producto</h4>
                </div>
              </div>
              <hr class="line" />
              <div class="rounded-top table-responsive">
                <table class="table table-bordered table-striped table-sm">
                  <thead class="bg-light">
                    <tr class="text-center text-uppercase">
                      <th>Presentacion</th>
                      <th>Unidad de medida</th>
                      <th>Codigo de barras</th>
                      <th>Embalaje</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="text-center">
                      <td class="align-middle">{{ productoPorVer.Presentacion }}</td>
                      <td class="align-middle">{{ productoPorVer.Nom_unidad_medida }}</td>
                      <td class="align-middle">{{ productoPorVer.Codigo_Barras }}</td>
                      <td class="align-middle">{{ productoPorVer.Embalaje }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <div class="row card-title d-flex justify-content-between">
                <div class="col px-0">
                  <h4 class="text-primary">Variables de categoría</h4>
                </div>
              </div>
              <hr class="line" />
              <ng-container *ngIf="VariablesProducto.categoria.nom.length > 0; else notVariablesCat">
                <div class="rounded-top table-responsive">
                  <table class="table table-bordered table-striped table-sm">
                    <thead class="bg-light">
                      <tr class="text-center text-uppercase">
                        <ng-container *ngFor="let item of VariablesProducto.categoria.nom">
                          <th>{{ item.replace("_"," ") }}</th>
                        </ng-container>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="text-center">
                        <ng-container *ngFor="let item of VariablesProducto.categoria.valor">
                          <td class="align-middle">{{ item }}</td>
                        </ng-container>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <div class="row card-title d-flex justify-content-between">
                <div class="col px-0">
                  <h4 class="text-primary">Variables de subcategoría</h4>
                </div>
              </div>
              <hr class="line" />
              <ng-container *ngIf="VariablesProducto.subcategoria.nom.length > 0; else notVariablesSubcat">
                <div class="rounded-top table-responsive">
                  <table class="table table-bordered table-striped table-sm">
                    <thead class="bg-light">
                      <tr class="text-center text-uppercase">
                        <ng-container *ngFor="let item of VariablesProducto.subcategoria.nom">
                          <th>{{ item.replace("_"," ") }}</th>
                        </ng-container>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="text-center">
                        <ng-container *ngFor="let item of VariablesProducto.subcategoria.valor">
                          <td class="align-middle">{{ item }}</td>
                        </ng-container>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
<ng-template #notProduct>
  <app-not-data [loading]="cargando.valor()"></app-not-data>
</ng-template>
<ng-template #notActividad>
  <app-not-data [loading]="cargando.actividad" text="Este producto no registra actividad!"></app-not-data>
</ng-template>
<ng-template #notVariablesCat>
  <app-not-data [loading]="cargando.actividad" text="La categoría no registra varaibles para este producto"></app-not-data>
</ng-template>
<ng-template #notVariablesSubcat>
  <app-not-data [loading]="cargando.actividad" text="La subcategoría no registra varaibles para este producto"></app-not-data>
</ng-template>
