<div class="card-title d-flex justify-content-between">
  <h6 class="">Fijos</h6>
  <div class="btn-group rounded">
    <button class="btn btn-primary btn-sm" [routerLink]="['crear']">
      <i class="fa fa-plus"></i> Agregar
    </button>
    <button
      class="btn btn-info btn-sm"
      style="float: right"
      (click)="openClose()"
    >
      <i class="fas fa-sliders-h"></i> Filtros
    </button>
  </div>
</div>
<!-- <hr class="line"> -->
<mat-accordion multi>
  <mat-expansion-panel class="mat-elevation-z0">
    <mat-form-field class="col-md-6 pl-0" appearance="outline">
      <mat-label>Nombre</mat-label>
      <input type="text" matInput placeholder="Busca por nombre" />
    </mat-form-field>
  </mat-expansion-panel>
</mat-accordion>
<table
  class="table table-bordered table-striped table-sm table-responsive-sm"
  style="font-size: small"
  *ngIf="turnosFijos.length && !loading; else notData"
>
<thead class="bg-light">
    <tr class="text-center text-uppercase">
      <th class="align-middle">Nombre</th>
      <th class="col-md-1 align-middle">Estado</th>
      <th class="col-md-1 align-middle">Horario</th>
      <th class="col-md-1 align-middle"><i class="mdi mdi-chevron-down"></i></th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="let turnoFijo of turnosFijos"
      class="text-center"
      [ngClass]="{
        'text-danger font-weight-bold': turnoFijo.state == 'Inactivo'
      }"
    >
      <td class="align-middle">{{ turnoFijo.text }}</td>
      <td class="align-middle">
        <span
          [ngClass]="
            turnoFijo.state == 'Inactivo'
              ? 'badge badge-danger'
              : 'badge badge-primary'
          "
        >
          {{ turnoFijo.state }}
        </span>
      </td>
      <td class="align-middle">
        <button
          type="button "
          class="btn btn-info btn-sm"
          (click)="findHours(turnoFijo.value); openConfirm(add)"
        >
          <i class="fa fa-eye"></i>
        </button>
      </td>
      <td class="align-middle">
        <div ngbDropdown class="dropdown-primary">
          <button
            ngbDropdownToggle
            class="btn btn-primary btn-sm waves-effect waves-light"
            type="button"
          >
            <i class="mdi mdi-chevron-down"></i>
          </button>
          <div ngbDropdownMenu>
            <a
              [routerLink]="['crear', turnoFijo.value]"
              class="dropdown-item text-info waves-light waves-effect caja-botones"
            >
              <i class="far fa-edit"></i> Editar
            </a>
            <a
              class="dropdown-item waves-light waves-effect caja-botones"
              [ngClass]="{
                'text-success': turnoFijo.state == 'Inactivo',
                'text-danger': turnoFijo.state == 'Activo'
              }"
              (click)="changeState(turnoFijo.value)"
            >
              <i
                [ngClass]="{
                  'far fa-trash-alt': turnoFijo.state == 'Activo',
                  'fa fa-check': turnoFijo.state == 'Inactivo'
                }"
              ></i>
              {{ turnoFijo.state == "Inactivo" ? "Activar" : "Anular" }}
            </a>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>

<!-- <div class="alert alert-secondary text-center " #notData>
    <p class="font-weight-bold ">No existen turnos fijos actualmente.</p>
</div> -->
<ng-template #notData>
  <app-not-data [loading]="loading"></app-not-data>
</ng-template>

<ng-template #notDataHours>
  <app-not-data [loading]="loadingHours"></app-not-data>
</ng-template>

<ng-template #add let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="text-primary modal-title">Información del Turno</h4>
      <button
        type="button"
        class="btn btn-sm btn-flash-border-primary ri-close-fill"
        aria-label="Close"
        (click)="modal.dismiss('Cross click')"
      ></button>
    </div>
  </div>
  <div class="modal-body">
    <table class="table table-striped">
      <thead *ngIf="hours.length && !loadingHours; else notDataHours">
        <tr>
          <th>Día</th>
          <th>Entrada 1</th>
          <th>Salida 1</th>
          <th>Entrada 2</th>
          <th>Salida 2</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let horaTurno of hours">
          <td>{{ horaTurno.day }}</td>
          <td>{{ horaTurno.entry_time_one }}</td>
          <td>{{ horaTurno.leave_time_one }}</td>
          <td>{{ horaTurno.entry_time_two }}</td>
          <td>{{ horaTurno.leave_time_two }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-default"
      (click)="modal.dismiss('Cross click')"
    >
      Cerrar
    </button>
  </div>
</ng-template>

<app-modal-basic #hourModal [dialogClass]="'modal-lg'" class="">
  <div class="app-modal-header">
    <div class="row">
      <div class="col-12">
        <h5></h5>
      </div>
    </div>
  </div>
  <div class="app-modal-body"></div>
  <div class="app-modal-body text-right">
    <button
      type="button"
      (click)="hourModal.hide()"
      class="btn btn-sm btn-danger"
    >
      Cerrar
    </button>
  </div>
</app-modal-basic>
