<div class="row">
    <div class="col-md-10 mx-auto">
        <div class="card">
            <div class="card-body">
                <div class="card-title d-flex justify-content-between">
                    <img src="assets/images/logo.png" alt="" height="45" />
                    <h4 class="text-primary">
                        <app-cabecera [datosCabecera]="datosCabecera"></app-cabecera>
                    </h4>
                </div>
                <hr class="line">
                <div class="container mt-4">
                    <div class="row">
                        <div class="col-10 mx-auto">
                            <form #FormFiltros="ngForm">

                                <div class="form-group row">
                                    <label for="Fecha_Inicial" class="col-sm-4 col-form-label">Fecha Inicial</label>
                                    <div class="col-sm-8">
                                        <input type="date" class="form-control" (change)="setQueryParams()"
                                            [(ngModel)]="CertificadoRetencionModel.Fecha_Inicial" name="Fecha_Inicial"
                                            id="Fecha_Inicial" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="Fecha_Corte" class="col-sm-4 col-form-label">Fecha Corte</label>
                                    <div class="col-sm-8">
                                        <input type="date" class="form-control" (change)="setQueryParams()"
                                            [(ngModel)]="CertificadoRetencionModel.Fecha_Final" name="Fecha_Corte"
                                            id="Fecha_Corte" required>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="cuentas" class="col-sm-4 col-form-label">Cuentas</label>
                                    <div class="col-sm-8">
                                        <!-- <input [(ngModel)]="Cuenta_Inicial" type="text" name="Cuenta_Inicial"
                                            id="Cuenta_Inicial" class="form-control form-control-sm f-9"
                                            [ngbTypeahead]="search1" [resultTemplate]="rt1"
                                            [inputFormatter]="formatter1"
                                            (ngModelChange)="BuscarCuenta(Cuenta_Inicial, 'Inicial')" />
                                        <input type="hidden" name="Cuenta_I"
                                            [(ngModel)]="CertificadoRetencionModel.Cuenta_Inicial"> -->
                                        <ng-select [ngClass]="'ng-select'" class="custom" [items]="Cuentas"
                                            name="cuentas" [(ngModel)]="CertificadoRetencionModel.Cuentas"
                                            (ngModelChange)="setQueryParams()" [multiple]="true"></ng-select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="Nit" class="col-sm-4 col-form-label">NIT o C.C</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" name="Nit"
                                            (change)="AsignarTercero(TerceroSeleccionado)"
                                            [(ngModel)]="TerceroSeleccionado" type="text" placeholder="Nombre o Nit"
                                            [ngbTypeahead]="search_tercero" [resultTemplate]="rt_tercero"
                                            [inputFormatter]="formatter_tercero">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="fecha_expedicion" class="col-sm-4 col-form-label">Fecha de
                                        Expedici√≥n</label>
                                    <div class="col-sm-8">
                                        <input type="date" name="fecha_expedicion" id="fecha_expedicion"
                                            [(ngModel)]="CertificadoRetencionModel.Fecha_Expedicion"
                                            class="form-control" required>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12 d-flex justify-content-center">
                            <button class="btn btn-primary btn-lg" [disabled]="!FormFiltros.valid"
                            (click)="generarCertificado()"><i class="fa fa-eye"></i> Generar
                            certificado</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #rt1 let-r="result" let-t="term">
    <span class="f-9">{{ r.Codigo }} </span>
</ng-template>
<ng-template #rt_tercero let-r="result" let-t="term">
    <span class="f-9">
        {{r.Nombre_Tercero}}
    </span>
</ng-template>


<!-- <div class="col-md-2 text-right">
    <div>
        <label for="" class="f-12">
            Cuenta Final
        </label>
    </div>
</div>

<div class="col-md-4">
    <div class="form-group">
        <input [(ngModel)]="Cuenta_Final" type="text" name="Cuenta_Final" id="Cuenta_Final"
            class="form-control form-control-sm f-9" [ngbTypeahead]="search1" [resultTemplate]="rt1"
            [inputFormatter]="formatter1" (ngModelChange)="BuscarCuenta(Cuenta_Final, 'Final')" />
        <input type="hidden" name="Cuenta_F" [(ngModel)]="CertificadoRetencionModel.Cuenta_Final">
    </div>
</div> -->