<div class="card">
  <div class="card-body">
    <div class="card-title d-flex justify-content-between">
      <h4 class="text-primary">Crear APU - Conjunto</h4>
      <div>
        <span>
          {{ date | date: "EEEE, MMMM d, y" | titlecase }} - Bucaramanga -
          Colombia
        </span>
      </div>
    </div>
    <hr class="line" />
    <form [formGroup]="form">
      <mat-form-field class="col-md-2 pl-0" appearance="outline">
        <mat-label>Nombre</mat-label>
        <input
          matInput
          type="text"
          placeholder="Ingresa el nombre"
          formControlName="name"
        />
      </mat-form-field>
      <mat-form-field class="col-md-2 pl-0" appearance="outline">
        <mat-label>Destino</mat-label>
        <mat-select formControlName="city_id">
          <mat-option *ngFor="let item of cities" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="col-md-3 pl-0" appearance="outline">
        <mat-label>¿Quién elbaora?</mat-label>
        <mat-select formControlName="person_id">
          <mat-option *ngFor="let item of people" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="col-md-3 pl-0" appearance="outline">
        <mat-label>Cliente</mat-label>
        <mat-select formControlName="third_party_id">
          <mat-option *ngFor="let item of clients" [value]="item.value">{{
            item.text
          }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="col-md-2 px-0" appearance="outline">
        <mat-label>Línea</mat-label>
        <input
          matInput
          type="text"
          placeholder="Ingresa la línea"
          formControlName="line"
        />
      </mat-form-field>
      <mat-form-field
        class="col-md-12 px-0 mat-form-field-no-padding"
        appearance="outline"
      >
        <mat-label>Observaciones</mat-label>
        <textarea
          matInput
          placeholder="Ingrese las observaciones"
          rows="5"
          formControlName="observation"
          [cdkTextareaAutosize]="true"
        ></textarea>
      </mat-form-field>
      <h5 class="mt-2 text-center">Costos Directos</h5>
      <hr class="line" />
      <h6>Plano</h6>
      <div>
        <ngx-dropzone class="drop-zone" (change)="onSelect($event)">
          <ngx-dropzone-label>
            <span><i class="fas fa-cloud-download-alt"></i></span> Arrastre y
            suelte el archivo
          </ngx-dropzone-label>
          <ngx-dropzone-preview
            *ngFor="let f of files"
            [removable]="true"
            (removed)="onRemove(f)"
          >
            <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
          </ngx-dropzone-preview>
        </ngx-dropzone>
      </div>
      <h6 class="mt-3">Listado de Piezas</h6>
      <ng-container *ngIf="piecesSetsList.controls.length; else notData">
        <table
          class="table table-bordered table-striped table-sm"
          style="font-size: small"
        >
          <thead class="bg-light">
            <tr class="text-center text-uppercase">
              <th class="align-middle">Item</th>
              <th class="align-middle">Tipo</th>
              <th class="align-middle">Descripción</th>
              <th class="align-middle">Unidad</th>
              <th class="align-middle">Cantidad</th>
              <th class="align-middle">Costo Unitario</th>
              <th class="align-middle">Total</th>
              <th class="align-middle">
                <i class="fas fa-trash-alt"></i>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="list_pieces_sets">
            <ng-container
              *ngFor="let item of piecesSetsList.controls; let i = index"
            >
              <tr [formGroupName]="i" class="text-center">
                <td class="align-middle">
                  {{ i + 1 }}
                </td>
                <td class="align-middle">
                  <select
                    class="form-control form-control-sm"
                    id="descripcion"
                    formControlName="apu_type"
                  >
                    <option value="P">Pieza</option>
                    <option value="C">Conjunto</option>
                  </select>
                </td>
                <td class="align-middle">
                  <div style="position: relative">
                    <input
                      *ngIf="item['controls']['apu_type']['value'] == 'P'"
                      style="width: 280px"
                      id="typeahead-http"
                      type="text"
                      class="form-control form-control-sm"
                      [ngbTypeahead]="search"
                      [resultTemplate]="rt"
                      [inputFormatter]="formatter"
                      placeholder="Piezas"
                      formControlName="description"
                      (change)="select(item, 'description', 'apu_part_id')"
                    />
                  </div>
                  <div style="position: relative">
                    <input
                      *ngIf="item['controls']['apu_type']['value'] == 'C'"
                      style="width: 280px"
                      id="typeahead-httpp"
                      type="text"
                      class="form-control form-control-sm"
                      [ngbTypeahead]="searchSet"
                      [resultTemplate]="rt"
                      [inputFormatter]="formatterSet"
                      placeholder="Conjuntos"
                      formControlName="description"
                      (change)="select(item, 'description', 'apu_set_child_id')"
                    />
                  </div>
                  <!-- <ng-select [items]="apuPart$ | async" bindLabel="name" bindValue="id" [loading]="apuPartLoading" [typeahead]="apuPartInput$" typeToSearchText="Por favor para buscar" formControlName="apu_part_id">
                                                      </ng-select> -->
                </td>
                <!-- <td>
                                                      <ng-select [items]="apuSets$ | async" bindLabel="name" bindValue="id" [loading]="apuSetsLoading" [typeahead]="apuSetsInput$" typeToSearchText="Por favor para buscar" formControlName="apu_set_child_id">
                                                      </ng-select>
                                                  </td> -->
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="unidad_maquinas_herra"
                    formControlName="unit"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    class="form-control form-control-sm"
                    id="costo_unitario_maquinas_herra"
                    formControlName="amount"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_maquinas_herra"
                    formControlName="unit_cost"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="total_maquinas_herra"
                    formControlName="total"
                  />
                </td>
                <td class="align-middle">
                  <button
                    style="float: right"
                    class="btn btn-danger btn-sm"
                    placement="bottom"
                    type="button"
                    ngbTooltip="Borrar"
                    (click)="deletePiecesSets(i)"
                  >
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
        <div class="row d-flex justify-content-end">
          <div class="col-md-3">
            <div class="d-flex justify-content-between">
              <label>SubTotal:</label>
              <span>{{
                this.form.get("list_pieces_sets_subtotal").value
              }}</span>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="d-flex justify-content-end">
        <div class="btn-group">
          <button
            class="btn btn-primary btn-sm"
            placement="bottom"
            type="button"
            ngbTooltip="Agregar"
            (click)="newPiecesSets()"
          >
            <i class="fas fa-plus"></i>
          </button>
          <button
            class="btn btn-info btn-sm"
            placement="bottom"
            type="button"
            ngbTooltip="Agregar item"
            (click)="findApus()"
          >
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
      <hr />
      <h6 class="mt-3">Maquinas Herramientas</h6>
      <ng-container *ngIf="machineToolList.controls.length; else notData">
        <table
          class="table table-bordered table-responsive-lg table-striped table-sm"
          style="font-size: small"
        >
          <thead class="bg-light">
            <tr class="text-center text-uppercase">
              <th class="align-middle">Item</th>
              <th class="align-middle">Descripción</th>
              <th class="align-middle">Unidad</th>
              <th class="align-middle">Cantidad</th>
              <th class="align-middle">Costo Unitario</th>
              <th class="align-middle">Total</th>
              <th class="align-middle">
                <i class="fas fa-trash-alt"></i>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="machine_tools">
            <ng-container
              *ngFor="let item of machineToolList.controls; let i = index"
            >
              <tr [formGroupName]="i" class="text-center">
                <td class="align-middle">
                  {{ i + 1 }}
                </td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="descripcion"
                    formControlName="description"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="unidad_maquinas_herra"
                    formControlName="unit"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_maquinas_herra"
                    formControlName="amount"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_maquinas_herra"
                    formControlName="unit_cost"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="total_maquinas_herra"
                    formControlName="total"
                  />
                </td>
                <td class="align-middle">
                  <button
                    style="float: right"
                    class="btn btn-danger btn-sm"
                    placement="bottom"
                    type="button"
                    ngbTooltip="Borrar"
                    (click)="deleteMachineTool(i)"
                  >
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
        <div class="row d-flex justify-content-end">
          <div class="col-md-3">
            <div class="d-flex justify-content-between">
              <label>SubTotal:</label>
              <span>{{ this.form.get("machine_tools_subtotal").value }}</span>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="d-flex justify-content-end">
        <button
          class="btn btn-primary btn-sm"
          placement="bottom"
          type="button"
          ngbTooltip="Agregar"
          (click)="newMachineTool()"
        >
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <hr />
      <h6 class="mt-3">Procesos Internos</h6>
      <ng-container *ngIf="internalProcessList.controls.length; else notData">
        <table
          class="table table-bordered table-responsive-lg table-striped table-sm"
          style="font-size: small"
        >
          <thead class="bg-light">
            <tr class="text-center text-uppercase">
              <th class="align-middle">Item</th>
              <th class="align-middle">Descripción</th>
              <th class="align-middle">Unidad</th>
              <th class="align-middle">Cantidad</th>
              <th class="align-middle">Costo Unitario</th>
              <th class="align-middle">Total</th>
              <th class="align-middle">
                <i class="fas fa-trash-alt"></i>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="internal_processes">
            <ng-container
              *ngFor="let item of internalProcessList.controls; let i = index"
            >
              <tr [formGroupName]="i" class="text-center">
                <td class="align-middle">{{ i + 1 }}</td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="descripcion_proceso_interno"
                    formControlName="description"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="descripcion_proceso_interno"
                    formControlName="unit"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_proceso_interno"
                    formControlName="amount"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_proceso_interno"
                    formControlName="unit_cost"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="total_proceso_interno"
                    formControlName="total"
                  />
                </td>
                <td class="align-middle">
                  <button
                    style="float: right"
                    class="btn btn-danger btn-sm"
                    placement="bottom"
                    type="button"
                    ngbTooltip="Borrar"
                    (click)="deleteInternalProccess(i)"
                  >
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
        <div class="row d-flex justify-content-end">
          <div class="col-md-3">
            <div class="d-flex justify-content-between">
              <label>SubTotal:</label>
              <span>{{
                this.form.get("internal_processes_subtotal").value
              }}</span>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="d-flex justify-content-end">
        <button
          class="btn btn-primary btn-sm"
          placement="bottom"
          type="button"
          ngbTooltip="Agregar"
          (click)="newInternalProccesses()"
        >
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <hr />
      <h5 class="mt-3">Procesos Externos</h5>
      <ng-container *ngIf="externalProcessList.controls.length; else notData">
        <table
          class="table table-bordered table-responsive-lg table-striped table-sm"
          style="font-size: small"
        >
          <thead class="bg-light">
            <tr class="text-center text-uppercase">
              <th class="align-middle">Item</th>
              <th class="align-middle">Descripción</th>
              <th class="align-middle">Unidad</th>
              <th class="align-middle">Cantidad</th>
              <th class="align-middle">Costo Unitario</th>
              <th class="align-middle">Total</th>
              <th class="align-middle">
                <i class="fas fa-trash-alt"></i>
              </th>
            </tr>
          </thead>
          <tbody formArrayName="external_processes">
            <ng-container
              *ngFor="let item of externalProcessList.controls; let i = index"
            >
              <tr [formGroupName]="i" class="text-center">
                <td class="align-middle">
                  {{ i + 1 }}
                </td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="descripcion_proceso_externo"
                    formControlName="description"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="text"
                    class="form-control form-control-sm"
                    id="descripcion_proceso_externo"
                    formControlName="unit"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="q_unitaria_proceso_externo"
                    formControlName="amount"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="costo_unitario_proceso_externo"
                    formControlName="unit_cost"
                  />
                </td>
                <td class="align-middle">
                  <input
                    type="number"
                    min="0"
                    class="form-control form-control-sm"
                    id="total_proceso_externo"
                    formControlName="total"
                  />
                </td>
                <td class="align-middle">
                  <button
                    style="float: right"
                    class="btn btn-danger btn-sm"
                    placement="bottom"
                    type="button"
                    ngbTooltip="Borrar"
                    (click)="deleteExternalProccess(i)"
                  >
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
        <div class="row d-flex justify-content-end">
          <div class="col-md-3">
            <div class="d-flex justify-content-between">
              <label>SubTotal:</label>
              <span>{{
                this.form.get("external_processes_subtotal").value
              }}</span>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="d-flex justify-content-end">
        <button
          class="btn btn-primary btn-sm"
          placement="bottom"
          type="button"
          ngbTooltip="Agregar"
          (click)="newExternalProccesses()"
        >
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <hr />
      <div class="row mt-3">
        <span
          *ngIf="!otherCollapsed"
          class="btn-sm others-icon ml-2"
          type="button"
          (click)="otherCollapsed = !otherCollapsed"
          [attr.aria-expanded]="!otherCollapsed"
          aria-controls="collapseExample2"
        >
          <i class="fas fa-chevron-right"></i>
        </span>
        <span
          *ngIf="otherCollapsed"
          class="btn-sm others-icon"
          type="button"
          (click)="otherCollapsed = !otherCollapsed"
          [attr.aria-expanded]="!otherCollapsed"
          aria-controls="collapseExample2"
        >
          <i class="fas fa-chevron-down"></i>
        </span>
        <h6>Otros</h6>
      </div>
      <div [ngbCollapse]="!otherCollapsed">
        <ng-container *ngIf="othersList.controls.length; else notData">
          <table
            class="table table-bordered table-responsive-lg table-striped table-sm"
            style="font-size: small"
          >
            <thead class="bg-light">
              <tr class="text-center text-uppercase">
                <th class="align-middle">Item</th>
                <th class="align-middle">Descripción</th>
                <th class="align-middle">Unidad</th>
                <th class="align-middle">Cantidad</th>
                <th class="align-middle">Costo Unitario</th>
                <th class="align-middle">Total</th>
                <th class="align-middle">
                  <i class="fas fa-trash-alt"></i>
                </th>
              </tr>
            </thead>
            <tbody formArrayName="others">
              <ng-container
                *ngFor="let item of othersList.controls; let i = index"
              >
                <tr [formGroupName]="i" class="text-center">
                  <td class="align-middle">
                    {{ i + 1 }}
                  </td>
                  <td class="align-middle">
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="descripcion_otros"
                      formControlName="description"
                    />
                  </td>
                  <td class="align-middle">
                    <input
                      type="text"
                      class="form-control form-control-sm"
                      id="descripcion_otros"
                      formControlName="unit"
                    />
                  </td>
                  <td class="align-middle">
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-sm"
                      id="q_unitaria_otros"
                      formControlName="amount"
                    />
                  </td>
                  <td class="align-middle">
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-sm"
                      id="costo_unitario_otros"
                      formControlName="unit_cost"
                    />
                  </td>
                  <td class="align-middle">
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-sm"
                      id="total_otros"
                      formControlName="total"
                    />
                  </td>
                  <td class="align-middle">
                    <button
                      style="float: right"
                      class="btn btn-danger btn-sm"
                      placement="bottom"
                      type="button"
                      ngbTooltip="Borrar"
                      (click)="deleteOthers(i)"
                    >
                      <i class="fas fa-trash-alt"></i>
                    </button>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
          <div class="row d-flex justify-content-end">
            <div class="col-md-3">
              <div class="d-flex justify-content-between">
                <label>SubTotal:</label>
                <span>{{ this.form.get("others_subtotal").value }}</span>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="d-flex justify-content-end">
          <button
            class="btn btn-primary btn-sm"
            placement="bottom"
            type="button"
            ngbTooltip="Agregar"
            (click)="newOthersList()"
          >
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
      <hr />
      <div class="row d-flex justify-content-end">
        <div class="col-md-3">
          <div class="d-flex justify-content-between">
            <label>Costo directo total:</label>
            <span>{{
              this.form.get("total_direct_cost").value
            }}</span>
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md-6">
          <div class="row">
            <span
              *ngIf="!indirectCollapsed"
              class="btn-sm others-icon"
              type="button"
              (click)="indirectCollapsed = !indirectCollapsed"
              [attr.aria-expanded]="!indirectCollapsed"
              aria-controls="indirectCost"
            >
              <i class="fas fa-chevron-down"></i>
            </span>
            <span
              *ngIf="indirectCollapsed"
              class="btn-sm others-icon"
              type="button"
              (click)="indirectCollapsed = !indirectCollapsed"
              [attr.aria-expanded]="!indirectCollapsed"
              aria-controls="indirectCost"
            >
              <i class="fas fa-chevron-right"></i>
            </span>
            <h5>Costos indirectos</h5>
          </div>
          <hr />
          <span [ngbCollapse]="indirectCollapsed">
            <table class="table table-striped">
              <tbody class="bg-light">
                <ng-container formArrayName="indirect_cost">
                  <ng-container
                    *ngFor="let item of indirecCostList.controls; let i = index"
                  >
                    <tr [formGroupName]="i">
                      <td>{{ item.controls.name.value }}</td>
                      <td>
                        <input
                          type="number"
                          min="0"
                          class="form-control form-control-plaintext form-control-sm"
                          formControlName="percentage"
                        />
                      </td>
                      <td>
                        <input
                          type="number"
                          min="0"
                          class="form-control form-control-plaintext form-control-sm"
                          formControlName="value"
                        />
                      </td>
                    </tr>
                  </ng-container>
                </ng-container>
                <tr>
                  <td class="text-center">Costos Indirectos</td>
                  <td></td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="indirect_cost_total"
                    />
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- <hr class="bg-dark"> -->
            <table class="table table-striped">
              <tbody class="bg-light">
                <tr>
                  <td>Costos Directos + Costos Indirectos Totales</td>
                  <td>
                    <div class="col-9" style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="direct_costs_indirect_costs_total"
                      />
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </span>
        </div>
        <div class="col-md-6">
          <div class="row">
            <span
              *ngIf="!auiCollapsed"
              class="btn-sm others-icon"
              type="button"
              (click)="auiCollapsed = !auiCollapsed"
              [attr.aria-expanded]="!auiCollapsed"
              aria-controls="aiu"
            >
              <i class="fas fa-chevron-down"></i>
            </span>
            <span
              *ngIf="auiCollapsed"
              class="btn-sm others-icon"
              type="button"
              (click)="auiCollapsed = !auiCollapsed"
              [attr.aria-expanded]="!auiCollapsed"
              aria-controls="aiu"
            >
              <i class="fas fa-chevron-right"></i>
            </span>
            <h5>AIU</h5>
          </div>
          <hr />
          <span [ngbCollapse]="auiCollapsed">
            <table class="table table-striped">
              <tbody class="bg-light">
                <tr>
                  <td>Administrativos</td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="administrative_percentage"
                    />
                  </td>
                  <td>
                    <div style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="administrative_value"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Imprevistos</td>
                  <td>
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="unforeseen_percentage"
                    />
                  </td>
                  <td>
                    <div style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="unforeseen_value"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>SubTotal + Administrativos + Imprevistos</td>
                  <td></td>
                  <td>
                    <div style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="administrative_unforeseen_subtotal"
                      />
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- <hr class="bg-dark"> -->
            <table class="table table-striped">
              <tbody class="bg-light">
                <tr>
                  <td class="text-center">Utilidad</td>
                  <td></td>
                  <td>
                    <div style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="utility_percentage"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>SubTotal + Admin + Imprevisto + Utilidad</td>
                  <td></td>
                  <td>
                    <div style="float: right">
                      <input
                        type="number"
                        min="0"
                        class="form-control form-control-plaintext form-control-sm"
                        formControlName="admin_unforeseen_utility_subtotal"
                      />
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <hr />
          </span>
          <table class="table table-striped">
            <tbody class="bg-light">
              <tr>
                <td>Precio Venta Total COP + Retención</td>
                <td></td>
                <td>
                  <div style="float: right">
                    <input
                      type="number"
                      style="background-color: transparent"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="sale_price_cop_withholding_total"
                    />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <!-- <hr class="bg-dark"> -->
          <table class="table table-striped">
            <tbody>
              <tr>
                <td>TRM</td>
                <td>
                  <div style="float: right">
                    <input
                      type="number"
                      min="0"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="trm"
                    />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <!-- <hr class="bg-dark"> -->
          <table class="table table-striped">
            <tbody class="bg-light">
              <tr>
                <td>Precio Venta Total USD + Retención</td>
                <td>
                  <div style="float: right">
                    <input
                      type="number"
                      readonly
                      style="background-color: transparent"
                      min="0"
                      class="form-control form-control-plaintext form-control-sm"
                      formControlName="sale_price_usd_withholding_total"
                    />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <button
          class="btn-block btn btn-primary"
          type="button"
          (click)="save()"
        >
          Guardar
        </button>
    </form>
  </div>
</div>

<ng-template #notData>
  <div class="alert alert-warning text-center" role="alert">
    ¡No hay datos aquí!
  </div>
</ng-template>

<app-get-apus #apus (sendApus)="getApus($event)"></app-get-apus>

<ng-template #rt let-r="result" let-t="term">
  <span class="f-9">{{ r.name }} </span>
</ng-template>
