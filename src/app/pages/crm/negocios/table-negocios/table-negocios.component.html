<div class="rounded-top table-responsive mt-3">
  <table
    class="table table-bordered table-striped table-sm"
    *ngIf="!loading && negocios.length > 0; else notData"
  >
    <thead class="bg-light">
      <tr class="text-center text-uppercase">
        <th>Foto</th>
        <th>Código</th>
        <th>Nombre</th>
        <th>Empresa</th>
        <th>Presupuesto</th>
        <th>Fecha entrega</th>
        <th class="">Etapa</th>
        <th><i class="mdi mdi-chevron-down"></i></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let neg of negocios" class="text-center">
        <td class="p-0">
          <img
            [src]="neg.third_party.image | image"
            onerror="this.src='../../../../assets/images/noprofile.png'"
            class="rounded-circle mx-auto img-fluid header-profile-user"
          />
        </td>
        <td class="align-middle" scope="row">{{ neg.code }}</td>
        <td class="align-middle" scope="row">{{ neg.name }}</td>
        <td class="align-middle">
          {{ neg.third_party.full_name }}
        </td>
        <td class="align-middle">$ {{ neg.budget_value | number }}</td>
        <td class="align-middle">{{ neg.date | date }}</td>
        <td class="align-middle p-0">
          <select
            class="form-control form-control-sm"
            [value]="neg.status"
            (change)="changeState($event, neg)"
          >
            <option value="Prospección">Prospección</option>
            <option value="Presupuesto">Presupuesto</option>
            <option value="Cotización">Cotización</option>
            <option value="Negociación">Negociación</option>
            <option value="Adjudicación">Adjudicación</option>
          </select>
        </td>
        <td>
          <div ngbDropdown container="body" class="dropdown-primary">
            <button
              ngbDropdownToggle
              class="btn btn-primary btn-sm"
              type="button"
            >
              <i class="mdi mdi-chevron-down"></i>
            </button>
            <div ngbDropdownMenu>
              <a
                class="dropdown-item text-success"
                href="javascript: void(0);"
                [routerLink]="['/crm/negocios/', neg.id]"
              >
                <i class="fas fa-eye"></i> Ver</a
              >
              <!-- <a
                class="dropdown-item  text-warning "
                href="javascript: void(0);"
                (click)="nextState(neg.status, neg.id)"
              >
                <i class="fas fa-forward"></i> Siguiente etapa</a
              > -->
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<mat-paginator
  *ngIf="paginacion"
  [length]="paginacion.total"
  [pageSize]="paginacion.per_page"
  [pageIndex]="paginacion.current_page - 1"
  (page)="handlePageEventParent($event)"
  aria-label="Select page"
>
</mat-paginator>
<!-- <ngb-pagination
  class="d-flex justify-content-center pagination-rounded pagination-sm"
  [collectionSize]="pagination.collectionSize"
  [pageSize]="pagination.pageSize"
  [(page)]="pagination.page"
  (pageChange)="getNegociosParent($event)"
  aria-label="Default pagination"
  maxSize="5"
  rotate="true"
  ellipses="false"
  boundaryLinks="true"
>
</ngb-pagination> -->
<ng-template #notData>
  <app-not-data [loading]="loading"></app-not-data>
</ng-template>
