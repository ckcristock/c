<div class="card">
    <div class="card-body">
        <div class="card-title">
            <div class="row">
                <div class="col-3 mt-2">
                    <img src="../../../../assets/images/logo.png" alt="">
                </div>
                <div class="col-3 mt-3">
                    <h5 class="t">Formato de Estimación de Viaticos Maquinados y Montajes SAS</h5>
                </div>
                <div class="col-6">
                    <div class="row mt-3 mb-3 mr-4" style="float: right;">
                        <div class="">
                            <label for="fecha">Fecha</label>
                            <input type="date" id="fecha" class="form-control form-control-sm">
                        </div>
                        <div class="ml-4">
                            <label for="ot">Orden de Trabajo</label>
                            <select id="ot" class="form-control form-control-sm">
                                <option>Pendiente</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <!------------- Inicia Informacion de viaje --------------->
        <form action="" [formGroup]="form">


            <div class="title">
                <h5>INFORMACIÓN DEL VIAJE</h5>
            </div>
            <div class="row mt-4">
                <div class="col-6">
                    <div class="mb-3 row" formGroupName="travel">
                        <label for="funcionario" class="col-sm-2 col-form-label col-form-label-sm">Funcionario</label>
                        <div class="col-sm-10">
                            <select class="form-control form-control-sm" id="funcionario" formControlName="person_id">
                            <option *ngFor="let d of data.funcionario" [value]="d.id">
                                {{ d.name }}
                            </option>
                        </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="cc" class="col-sm-2 col-form-label col-form-label-sm">CC</label>
                        <div class="col-sm-10">
                            <input type="text" readonly [value]="func.cc" class="form-control-plaintext form-control-sm" id="cc" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="cargo" class="col-sm-2 col-form-label col-form-label-sm">Cargo</label>
                        <div class="col-sm-10">
                            <input type="text" readonly [value]="func.position" class="form-control-plaintext form-control-sm" id="cargo" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="passport" class="col-sm-2 col-form-label col-form-label-sm">N° Pasaporte</label>
                        <div class="col-sm-10">
                            <input type="text" readonly [value]="func.passport" class="form-control-plaintext form-control-sm" id="passport" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="visa" class="col-sm-2 col-form-label col-form-label-sm">¿Tiene Visa Americana?</label>
                        <div class="col-sm-10">
                            <input type="text" readonly [value]="func.visa" class="form-control-plaintext form-control-sm" id="visa" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="tipo" class="col-sm-2 col-form-label col-form-label-sm">Tipo</label>
                        <div class="col-sm-10">
                            <input type="text" readonly [value]="func.type" class="form-control-plaintext form-control-sm" id="tipo" value="test">
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="mb-3 row">
                        <label for="origen" class="col-sm-2 col-form-label col-form-label-sm">Origen</label>
                        <div class="col-sm-10">
                            <select class="form-control form-control-sm" id="origen">
                            <option *ngFor="let d of data.origen" [value]="d.id">
                                {{ d.name }}
                            </option>
                        </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="destino" class="col-sm-2 col-form-label col-form-label-sm">Destino</label>
                        <div class="col-sm-10">
                            <select class="form-control form-control-sm" id="destino">
                            <option *ngFor="let d of data.origen" [value]="d.id">
                                {{ d.destino }}
                            </option>
                        </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="tipo_viaje" class="col-sm-2 col-form-label col-form-label-sm">Tipo de Viaje</label>
                        <div class="col-sm-10">
                            <select class="form-control form-control-sm" id="tipo_viaje">
                            <option *ngFor="let d of data.origen" [value]="d.id">
                                {{ d.tipo_viaje }}
                            </option>
                        </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="fecha_salida" class="col-sm-2 col-form-label col-form-label-sm">Fecha Salida</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control form-control-sm" id="fecha_salida" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="fecha_llegada" class="col-sm-2 col-form-label col-form-label-sm">Fecha de Llegada</label>
                        <div class="col-sm-10">
                            <input type="date" class="form-control form-control-sm" id="fecha_llegada" value="test">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="n_dias" class="col-sm-2 col-form-label col-form-label-sm">N° Dias</label>
                        <div class="col-sm-10">
                            <input type="number" [value]="" class="form-control form-control-sm" id="n_dias" value="test">
                        </div>
                    </div>
                </div>
            </div>
            <!------------------- Termina información de viaje ------------>
            <!------------------- Comienza Hospedaje ------------>
            <hr style="background-color: rgb(173, 233, 83);">
            <div class="title">
                <h5>HOSPEDAJE</h5>
            </div>
            <div class="row mt-4">
                <div class="col-12">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>
                                    <label for="tipo_hospedaje" class="col-form-label col-form-label-sm">Tipo</label>
                                </th>
                                <th>
                                    <label for="hotel_hospedaje" class="col-form-label col-form-label-sm">Hotel</label>
                                </th>
                                <th>
                                    <label for="direccion_hospedaje" class="col-form-label col-form-label-sm">Dirección</label>
                                </th>
                                <th>
                                    <label for="tel_contacto_hospedaje" class="col-form-label col-form-label-sm">Tel. contacto</label>
                                </th>
                                <th>
                                    <label for="tipo_acomodacion_hospedaje" class="col-form-label col-form-label-sm">Tipo Acomodación</label>
                                </th>
                                <th>
                                    <label for="tarifa_hospedaje" class="col-form-label col-form-label-sm">Tarifa</label>
                                </th>
                                <th>
                                    <label for="n_noches_hospedajes" class="col-form-label col-form-label-sm"># Noches</label>
                                </th>
                                <th>
                                    <label for="desayuno_hospedaje" class="col-form-label col-form-label-sm">¿Incluye Desayuno?</label>
                                </th>
                                <th>
                                    <label for="cancela_hotel_hospedaje" class="col-form-label col-form-label-sm">¿Quien Cancela hotel?</label>
                                </th>
                                <th>
                                    <label for="total_hospedaje" class="col-form-label col-form-label-sm">total</label>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container formArrayName="hospedaje" *ngFor="let item of hospedajeList.controls; let i = index">
                                <tr>
                                    <td [formGroupName]="i">
                                        <select name="" class="form-control form-control-sm" (change)="changeTipo($event.target.value, item)" formControlName="tipo" id="tipo_hospedaje">
                                            <option *ngFor="let t of tipo" [value]="t">
                                                {{ t }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <select name="" class="form-control form-control-sm" id="hotel_hospedaje" formControlName="hotel_id">
                                            <option *ngFor="let d of item['controls']['hoteles']['value']" [value]="d.id">
                                                {{ d.name }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="text" formControlName="direction" class="form-control form-control-sm" id="direccion_hospedaje">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input formControlName="phone" type="text" class="form-control form-control-sm" id="tel_contacto_hospedaje">
                                    </td>
                                    <td>
                                        <select class="form-control form-control-sm" id="tipo_acomodacion_hospedaje">
                                            <option value="doble">Doble</option>
                                            <option value="sencilla">Sencilla</option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="rate" class="form-control form-control-sm" id="tarifa_hospedaje">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="n_night" class="form-control form-control-sm" id="n_noches_hospedajes">
                                    </td>
                                    <td>
                                        <select class="form-control form-control-sm" id="desayuno_hospedaje">
                                            <option value="1">Si</option>
                                            <option value="0">No</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control form-control-sm" id="cancela_hotel_hospedaje">
                                            <option value="agencia">Agencia</option>
                                            <option value="viajero">Viajero</option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="total" class="form-control form-control-sm" id="total_hospedaje">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="10">
                                    <div class="btn-group" style="float: right;">
                                        <button class="btn btn-danger btn-sm" (click)="deleteHospedaje($event.target.value)" placement="bottom" ngbTooltip="Borrar">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        <button class="btn btn-info btn-sm" (click)="newHospedaje()" placement="bottom" ngbTooltip="Agregar">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <hr style="background-color: rgb(180, 248, 79);">
            <div class="title">
                <h5>TRANSPORTE TERRESTRE</h5>
            </div>
            <div class="row">
                <div class="col-12">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>
                                    <label for="tipo_transporte" class="col-form-label col-form-label-sm">Tipo</label>
                                </th>
                                <th>
                                    <label for="trayecto_transporte" class="col-form-label col-form-label-sm">Trayecto</label>
                                </th>
                                <th>
                                    <label for="empresa_transporte" class="col-form-label col-form-label-sm">Empresa</label>
                                </th>
                                <th>
                                    <label for="pago_tiquete_transporte" class="col-form-label col-form-label-sm">Pago Tiquete</label>
                                </th>
                                <th>
                                    <label for="hora_salida_transporte" class="col-form-label col-form-label-sm">Hora Salida</label>
                                </th>
                                <th>
                                    <label for="valor_tiquete_transporte" class="col-form-label col-form-label-sm">Valor Tiquete</label>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container formArrayName="transporte" *ngFor="let item of transporteList.controls; let i = index">
                                <tr>
                                    <td [formGroupName]="i">
                                        <select name="" formControlName="tipo" class="form-control form-control-sm" id="tipo_transporte">
                                            <option *ngFor="let tipo of tipo_transporte" [value]="tipo">
                                                {{ tipo }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="text" formControlName="journey" class="form-control form-control-sm" id="trayecto_transporte">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="text" formControlName="transport_company" class="form-control form-control-sm" id="empresa_transporte">
                                    </td>
                                    <td>
                                        <select class="form-control form-control-sm" id="pago_tiquete_transporte">
                                            <option value="agencia">Agencia</option>
                                            <option value="viajero">Viajero</option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="datetime" formControlName="expected_departure_time" class="form-control form-control-sm" id="hora_salida_transporte">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="ticket_value" class="form-control form-control-sm" id="valor_tiquete_transporte">
                                    </td>
                                </tr>
                            </ng-container>

                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6">
                                    <div class="btn-group" style="float: right;">
                                        <button class="btn btn-danger btn-sm" placement="bottom" ngbTooltip="Borrar" (click)="deleteTransporte($event.target.value)">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        <button class="btn btn-info btn-sm" placement="bottom" ngbTooltip="Agregar" (click)="newTransporte()">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <hr style="background-color: rgb(180, 248, 79);">
            <div class="title">
                <h5>TAXIS</h5>
            </div>
            <div class="row">
                <div class="col-12">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>
                                    <label for="tipo_taxi">Tipo</label>
                                </th>
                                <th>
                                    <label for="trayecto_taxi">Trayecto</label>
                                </th>
                                <th>
                                    <label for="ciudad_taxi">Ciudad</label>
                                </th>
                                <th>
                                    <label for="tarifa_taxi">Tarifa</label>
                                </th>
                                <th>
                                    <label for="trayectos_taxi">Trayectos</label>
                                </th>
                                <th>
                                    <label for="total_taxi">Total</label>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container formArrayName="taxi" *ngFor="let item of taxiList.controls; let i = index">
                                <tr>
                                    <td [formGroupName]="i">
                                        <select name="" formControlName="tipo" class="form-control form-control-sm" id="tipo_taxi">
                                            <option *ngFor="let t of tipo" [value]="t">
                                                {{ t }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <select formControlName="journey" class="form-control form-control-sm" id="trayecto_taxi">
                                            <option *ngFor="let item of trayecto" [value]="item">
                                                {{ item }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <select formControlName="city" class="form-control form-control-sm" id="ciudad_taxi">
                                            <option *ngFor="let item of city" [value]="item">
                                                {{ item }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="rate" class="form-control form-control-sm" id="tarifa_taxi">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="journeys" class="form-control form-control-sm" id="trayectos_taxi">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="total" class="form-control form-control-sm" id="total_taxi">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6">
                                    <div class="btn-group" style="float: right;">
                                        <button class="btn btn-danger btn-sm" placement="bottom" ngbTooltip="Borrar" (click)="deleteTaxi($event.target.value)">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        <button class="btn btn-info btn-sm" placement="bottom" ngbTooltip="Agregar" (click)="newTaxi()">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="col-12">
                    <hr style="background-color: rgb(180, 248, 79);">
                    <div class="title">
                        <h5>ALIMENTACIÓN</h5>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>
                                    <label for="alimentacion">Estadia</label>
                                </th>
                                <th>
                                    <label for="tipo_estadia">Tipo</label>
                                </th>
                                <th>
                                    <label for="alojamiento_desayuno">¿incluye desayuno?</label>
                                </th>
                                <th>
                                    <label for="tarifa_estadia">Tarifa</label>
                                </th>
                                <th>
                                    <label for="n_estadia">N° dias Estadia</label>
                                </th>
                                <th>
                                    <label for="total_estadia">Total</label>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container formArrayName="feeding" *ngFor="let item of FeedingList.controls; let i = index">
                                <tr>
                                    <td [formGroupName]="i">
                                        <select name="" formControlName="tipo" class="form-control form-control-sm" id="alimentacion">
                                            <option *ngFor="let item of tipo" [value]="item">
                                                {{ item }}
                                            </option>
                                        </select>
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="text" formControlName="type" class="form-control form-control-sm" id="tipo_estadia" value="test">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="text" formControlName="breckfast" class="form-control form-control-sm" id="alojamiento_desayuno" value="test">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="rate" class="form-control form-control-sm" id="tarifa_estadia" value="test">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="stay" class="form-control form-control-sm" id="n_estadia" value="test">
                                    </td>
                                    <td [formGroupName]="i">
                                        <input type="number" formControlName="total" class="form-control form-control-sm" id="total_estadia" value="test">
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6">
                                    <div class="btn-group" style="float: right;">
                                        <button class="btn btn-danger btn-sm" placement="bottom" ngbTooltip="Borrar" (click)="deleteFeeding($event.target.value)">
                                                <i class="fas fa-trash-alt"></i>
                                            </button>
                                        <button class="btn btn-info btn-sm" placement="bottom" ngbTooltip="Agregar" (click)="newFeeding()">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                    <hr style="background-color: rgb(167, 226, 78);">
                </div>
                <div class="col-6">
                    <table>
                        <thead>
                            <tr>
                                <div class="title">
                                    <h5>Observaciones</h5>
                                </div>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <textarea class="form-control form-control-sm" id="asd" cols="60" rows="10"></textarea>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-6">
                    <div class="title">
                        <h5>TOTAL VIATICOS</h5>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Dolares</th>
                                <th>COP</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Hospedaje</td>
                                <td>
                                    <input type="number" formControlName="totalHospedajeDolares" readonly class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" formControlName="totalHospedajePesos" readonly class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Transporte Terrestre</td>
                                <td></td>
                                <td>
                                    <input type="number" formControlName="totalTransportePesos" readonly class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Taxis</td>
                                <td>
                                    <input type="number" formControlName="totalTaxiDolares" readonly class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" formControlName="totalTaxiPesos" readonly class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Alimentación</td>
                                <td>
                                    <input type="number" formControlName="totalFeedingDolares" readonly class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" formControlName="totalFeedingPesos" readonly class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Lavanderia</td>
                                <td>
                                    <input type="number" formControlName="lavanderiaPesos" class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Sobre Equipaje</td>
                                <td>
                                    <input type="number" class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" class="form-control form-control-sm">
                                </td>
                            </tr>
                            <tr>
                                <td>Total</td>
                                <td>
                                    <input type="number" formControlName="totalDolares" readonly class="form-control form-control-sm">
                                </td>
                                <td>
                                    <input type="number" formControlName="totalPesos" readonly class="form-control form-control-sm">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    </div>
</div>